@layer base {
  :root { color-scheme: dark; }
  * { -webkit-tap-highlight-color: transparent; }

  html { @apply bg-surface text-text antialiased; }
  body { @apply bg-surface text-text min-h-dvh; }
  #app { @apply min-h-dvh bg-surface text-text; }

  ::selection { @apply bg-accent/25 text-text; }
}

@layer components {
  /* ---------- Layout primitives ---------- */
  .container-app { @apply mx-auto w-full max-w-6xl px-4; }
  .page { @apply space-y-5 sm:space-y-6; }
  .section { @apply space-y-3; }
  .row { @apply flex items-center justify-between gap-3; }
  .divider { @apply h-px w-full bg-white/10; }

  /* ---------- Typography ---------- */
  .kicker { @apply text-xs font-semibold tracking-wider uppercase text-text-3; }
  .h1 { @apply text-2xl sm:text-3xl font-extrabold tracking-tight; }
  .h2 { @apply text-lg sm:text-xl font-bold tracking-tight; }
  .h3 { @apply text-base font-bold; }
  .sub { @apply text-sm text-text-2 leading-relaxed; }
  .muted { @apply text-text-3; }

  /* ---------- Surfaces ---------- */
  .glass { @apply bg-surface-3/60 backdrop-blur-xl border border-stroke/60; }
  .card { @apply glass rounded-xl2 shadow-card; }
  .card-pad { @apply p-4 sm:p-5; }
  .card-press { @apply transition duration-200 hover:bg-white/[0.06] active:bg-white/[0.08] focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/50; }

  /* ---------- Buttons ---------- */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl2 border border-stroke/60 px-4 py-3 text-sm font-semibold;
    @apply min-h-[44px] select-none;
    @apply transition duration-200;
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/55;
    @apply disabled:opacity-60 disabled:cursor-not-allowed disabled:pointer-events-none;
    @apply active:translate-y-[1px];
  }

  .btn-primary { @apply bg-accent text-surface border-transparent hover:bg-accent-2 shadow-glow; }
  .btn-ghost { @apply bg-white/[0.02] hover:bg-white/[0.06] text-text; }
  .btn-danger { @apply bg-danger text-white border-transparent hover:bg-danger/90; }

  .btn-sm { @apply px-3 py-2 text-sm min-h-[40px]; }
  .btn-lg { @apply px-5 py-3.5 text-base min-h-[48px]; }

  .icon-btn {
    @apply inline-flex items-center justify-center rounded-xl2 border border-stroke/60 bg-white/[0.02];
    @apply w-11 h-11;
    @apply transition duration-200 hover:bg-white/[0.06] active:bg-white/[0.08];
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/55;
  }

  /* ---------- Forms ---------- */
  .label { @apply block text-sm font-semibold text-text; }
  .help { @apply text-xs text-text-3 mt-1; }
  .error { @apply text-xs text-danger mt-1; }

  .input {
    @apply w-full rounded-xl2 px-4 py-3 bg-surface-2 border border-stroke/60 text-text placeholder:text-text-3;
    @apply min-h-[44px];
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/55;
    @apply disabled:opacity-60 disabled:cursor-not-allowed;
  }
  .select { @apply input pr-10 appearance-none; }

  /* ---------- Segmented control / tabs ---------- */
  .seg { @apply inline-flex items-center rounded-xl2 border border-stroke/60 bg-white/[0.02] p-1; }
  .seg-btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl2 px-3 py-2 text-sm font-semibold;
    @apply min-h-[40px];
    @apply transition duration-200;
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/55;
  }
  .seg-btn--active { @apply bg-white/[0.08] text-text shadow-soft; }
  .seg-btn--inactive { @apply text-text-2 hover:text-text hover:bg-white/[0.06]; }

  /* ---------- Chips / badges ---------- */
  .chip { @apply inline-flex items-center gap-2 rounded-full border border-stroke/60 px-3 py-1.5 text-xs text-text-2 bg-white/[0.03]; }
  .badge { @apply inline-flex items-center rounded-full border border-stroke/60 px-2.5 py-1 text-xs font-semibold bg-white/[0.03] text-text-2; }

  /* ---------- Alerts ---------- */
  .alert { @apply rounded-xl2 border px-4 py-3 text-sm; }
  .alert-danger { @apply border-danger/30 bg-danger/10 text-danger; }
  .alert-warn { @apply border-warn/30 bg-warn/10 text-warn; }
  .alert-ok { @apply border-accent/30 bg-accent/10 text-text; }

  /* ---------- Loading ---------- */
  .skeleton { @apply animate-pulse rounded-xl2 bg-white/10; }

  /* ---------- Mobile nav ---------- */
  .nav-item {
    @apply flex flex-col items-center justify-center gap-1 rounded-xl2 px-2 py-2;
    @apply min-h-[56px] min-w-[56px];
    @apply text-xs font-semibold;
    @apply text-text-3 transition duration-200;
    @apply hover:bg-white/[0.06] active:bg-white/[0.08];
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/55;
  }
  .nav-item--active { @apply text-text bg-white/[0.08] ring-1 ring-white/10; }
}
